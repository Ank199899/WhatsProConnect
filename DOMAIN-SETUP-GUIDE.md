# üåê Complete Domain Setup Guide
## WhatsApp Advanced - Production Domain Configuration

### **Current Server Status**
- **Server IP**: `100.115.3.36`
- **Frontend**: Running on port 3008
- **Backend**: Running on port 3006  
- **Database**: PostgreSQL ready

---

## **üöÄ Quick Setup (5 Steps)**

### **Step 1: Purchase Domain & Configure DNS**
```bash
# Add these DNS records at your domain registrar:
Type: A, Name: @, Value: 100.115.3.36
Type: A, Name: www, Value: 100.115.3.36
Type: A, Name: api, Value: 100.115.3.36
```

### **Step 2: Run SSL Setup**
```bash
# Replace 'your-domain.com' with your actual domain
sudo ./setup-ssl-domain.sh -d your-domain.com -e your-email@domain.com
```

### **Step 3: Update Environment**
```bash
./update-domain-env.sh -d your-domain.com
```

### **Step 4: Production Optimization**
```bash
./production-optimize.sh -d your-domain.com
```

### **Step 5: Deploy Application**
```bash
# Option A: Using PM2 (Recommended)
npm install pm2 -g
pm2 start ecosystem.config.js
pm2 save
pm2 startup

# Option B: Using Systemd
sudo systemctl start whatsapp-frontend
sudo systemctl start whatsapp-backend
```

---

## **üìã Detailed Setup Process**

### **1. Domain Purchase Options**

#### **Recommended Registrars**
- **Namecheap** - Good pricing, easy DNS management
- **GoDaddy** - Popular, good support
- **Cloudflare** - Best for security and performance
- **Google Domains** - Simple interface

#### **Domain Suggestions**
```
whatsappadvanced.com
whatsproconnect.com
wamessenger.com
chatpro.app
wamanager.io
```

### **2. DNS Configuration Examples**

#### **Basic Setup**
```
your-domain.com        A     100.115.3.36
www.your-domain.com    A     100.115.3.36
api.your-domain.com    A     100.115.3.36
```

#### **Advanced Setup with Subdomains**
```
your-domain.com        A     100.115.3.36
www.your-domain.com    A     100.115.3.36
api.your-domain.com    A     100.115.3.36
app.your-domain.com    A     100.115.3.36
admin.your-domain.com  A     100.115.3.36
ws.your-domain.com     A     100.115.3.36
```

### **3. SSL Certificate Options**

#### **Option A: Let's Encrypt (Free)**
```bash
# Automatic setup with our script
sudo ./setup-ssl-domain.sh -d your-domain.com -e your-email@domain.com
```

#### **Option B: Cloudflare SSL (Free + CDN)**
1. Add domain to Cloudflare
2. Update nameservers at registrar
3. Enable SSL in Cloudflare dashboard
4. Set SSL mode to "Full (strict)"

#### **Option C: Commercial SSL**
- Purchase from registrar or SSL provider
- Upload certificate files to server
- Update nginx configuration manually

### **4. Server Requirements**

#### **Minimum Requirements**
- **RAM**: 2GB (4GB recommended)
- **CPU**: 2 cores (4 cores recommended)
- **Storage**: 20GB SSD
- **Bandwidth**: 100GB/month

#### **Recommended Requirements**
- **RAM**: 8GB
- **CPU**: 4 cores
- **Storage**: 50GB SSD
- **Bandwidth**: 500GB/month

### **5. Security Configuration**

#### **Firewall Setup**
```bash
# Allow necessary ports
sudo ufw allow 22/tcp   # SSH
sudo ufw allow 80/tcp   # HTTP
sudo ufw allow 443/tcp  # HTTPS
sudo ufw enable
```

#### **Fail2Ban Setup**
```bash
sudo apt install fail2ban
sudo systemctl enable fail2ban
sudo systemctl start fail2ban
```

---

## **üîß Configuration Files Created**

### **Files Generated by Setup Scripts**
```
nginx-domain-config.conf     # Nginx configuration template
setup-ssl-domain.sh         # SSL certificate setup script
update-domain-env.sh        # Environment variables updater
production-optimize.sh      # Production optimization script
ecosystem.config.js         # PM2 configuration
optimize-db.sql            # Database optimization
monitor.sh                 # Monitoring script
```

### **Environment Variables Updated**
```bash
NEXT_PUBLIC_APP_URL=https://your-domain.com
NEXT_PUBLIC_API_URL=https://your-domain.com/api
NEXT_PUBLIC_WS_URL=https://your-domain.com
NEXT_PUBLIC_DOMAIN=your-domain.com
NEXT_PUBLIC_PROTOCOL=https
```

---

## **üß™ Testing & Verification**

### **DNS Propagation Check**
```bash
# Check if domain resolves to your server
nslookup your-domain.com
dig your-domain.com

# Online tools
# https://dnschecker.org/
# https://whatsmydns.net/
```

### **SSL Certificate Check**
```bash
# Test SSL certificate
openssl s_client -connect your-domain.com:443

# Online tools
# https://www.ssllabs.com/ssltest/
```

### **Application Testing**
```bash
# Test HTTP redirect
curl -I http://your-domain.com

# Test HTTPS access
curl -I https://your-domain.com

# Test API endpoint
curl https://your-domain.com/api/health

# Test WebSocket
# Use browser developer tools to check WebSocket connections
```

---

## **üìä Monitoring & Maintenance**

### **Uptime Monitoring**
- **UptimeRobot** (free) - https://uptimerobot.com/
- **Pingdom** - https://www.pingdom.com/
- **StatusCake** - https://www.statuscake.com/

### **SSL Certificate Monitoring**
```bash
# Check certificate expiry
certbot certificates

# Test auto-renewal
sudo certbot renew --dry-run
```

### **Log Monitoring**
```bash
# Application logs
tail -f logs/frontend-combined.log
tail -f logs/backend-combined.log

# Nginx logs
sudo tail -f /var/log/nginx/whatsapp-advanced.access.log
sudo tail -f /var/log/nginx/whatsapp-advanced.error.log

# System logs
sudo journalctl -u whatsapp-frontend -f
sudo journalctl -u whatsapp-backend -f
```

---

## **üö® Troubleshooting**

### **Common Issues**

#### **Domain Not Resolving**
```bash
# Check DNS propagation (can take 24-48 hours)
nslookup your-domain.com 8.8.8.8

# Clear local DNS cache
sudo systemctl flush-dns
```

#### **SSL Certificate Issues**
```bash
# Check certificate status
sudo certbot certificates

# Renew certificate manually
sudo certbot renew

# Check nginx configuration
sudo nginx -t
sudo systemctl reload nginx
```

#### **Application Not Loading**
```bash
# Check if services are running
pm2 status
# or
sudo systemctl status whatsapp-frontend
sudo systemctl status whatsapp-backend

# Check ports
netstat -tlnp | grep :3008
netstat -tlnp | grep :3006

# Check logs
pm2 logs
# or
sudo journalctl -u whatsapp-frontend
```

#### **Database Connection Issues**
```bash
# Check PostgreSQL status
sudo systemctl status postgresql

# Test database connection
psql -h localhost -U whatsapp_user -d whatsapp_advanced -c "SELECT 1;"
```

---

## **üí° Performance Optimization**

### **Cloudflare Setup (Recommended)**
1. Add domain to Cloudflare
2. Enable these features:
   - **Auto Minify**: CSS, HTML, JS
   - **Brotli Compression**: On
   - **Caching Level**: Standard
   - **Browser Cache TTL**: 4 hours
   - **Always Online**: On

### **Database Optimization**
```bash
# Apply database optimizations
psql -U whatsapp_user -d whatsapp_advanced -f optimize-db.sql
```

### **Server Optimization**
```bash
# Install Redis for caching (optional)
sudo apt install redis-server
sudo systemctl enable redis-server

# Configure log rotation
sudo nano /etc/logrotate.d/whatsapp-advanced
```

---

## **üìû Support & Resources**

### **Documentation**
- **Next.js**: https://nextjs.org/docs
- **PostgreSQL**: https://www.postgresql.org/docs/
- **Nginx**: https://nginx.org/en/docs/
- **PM2**: https://pm2.keymetrics.io/docs/

### **Community**
- **GitHub Issues**: Create issues for bugs/features
- **Discord/Slack**: Join community channels
- **Stack Overflow**: Tag questions appropriately

---

## **‚úÖ Final Checklist**

- [ ] Domain purchased and DNS configured
- [ ] SSL certificate installed and working
- [ ] Application accessible via HTTPS
- [ ] API endpoints working
- [ ] WebSocket connections working
- [ ] Database optimized
- [ ] Monitoring setup
- [ ] Backups configured
- [ ] Security headers configured
- [ ] Performance optimized

**üéâ Your WhatsApp Advanced application is now ready for production with your custom domain!**
